<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.0.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-yes.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-yes.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-yes.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">
  <meta name="google-site-verification" content="google12621f48345db2f9.html">
  <meta name="baidu-site-verification" content="baidu_verify_EF7GhxbEmo.html">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.14.0/css/all.min.css">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css">

<script class="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"zorroye.github.io","root":"/","scheme":"Gemini","version":"8.0.0-rc.5","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":false,"bookmark":{"enable":true,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":"valine","storage":true,"lazyload":false,"nav":null,"activeClass":"valine"},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"path":"search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}};
  </script>

  <meta name="description" content="升级认知，看透本质">
<meta property="og:type" content="website">
<meta property="og:title" content="Ye&#39;s Blog">
<meta property="og:url" content="https://zorroye.github.io/page/18/index.html">
<meta property="og:site_name" content="Ye&#39;s Blog">
<meta property="og:description" content="升级认知，看透本质">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="ZorroYe">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://zorroye.github.io/page/18/">


<script class="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>Ye's Blog</title>
  


  <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?2b0dbd880dfaff3fde3fcb1beb61713d";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




  <noscript>
  <style>
  body { margin-top: 2rem; }

  .use-motion .menu-item,
  .use-motion .sidebar,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header {
    visibility: visible;
  }

  .use-motion .header,
  .use-motion .site-brand-container .toggle,
  .use-motion .footer { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle,
  .use-motion .custom-logo-image {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line {
    transform: scaleX(1);
  }

  .search-pop-overlay, .sidebar-nav { display: none; }
  .sidebar-panel { display: block; }
  </style>
</noscript>

<link rel="alternate" href="/atom.xml" title="Ye's Blog" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">Ye's Blog</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">勤解万难</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
        <li class="menu-item menu-item-schedule">

    <a href="/schedule/" rel="section"><i class="fa fa-calendar fa-fw"></i>日程表</a>

  </li>
        <li class="menu-item menu-item-sitemap">

    <a href="/sitemap.xml" rel="section"><i class="fa fa-sitemap fa-fw"></i>站点地图</a>

  </li>
        <li class="menu-item menu-item-commonweal">

    <a href="/404/" rel="section"><i class="fa fa-heartbeat fa-fw"></i>公益 404</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container">
  <div class="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</div>
        
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <section class="post-toc-wrap sidebar-panel">
      </section>
      <!--/noindex-->

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="ZorroYe"
      src="/images/avatar.png">
  <p class="site-author-name" itemprop="name">ZorroYe</p>
  <div class="site-description" itemprop="description">升级认知，看透本质</div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">366</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">61</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">74</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>

<iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width=260 height=52 src="//music.163.com/outchain/player?type=0&id=5186533478&auto=1&height=32">
</iframe>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <a href="qq:439753096?call|chat" title="QQ → qq:439753096?call|chat" rel="noopener" target="_blank"><i class="fab fa-qq fa-fw"></i>QQ</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:439753096@qq.com" title="E-Mail → mailto:439753096@qq.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>


  <div class="links-of-blogroll animated">
    <div class="links-of-blogroll-title"><i class="fa fa-globe fa-fw"></i>
      Links
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <a href="https://blog.daliansky.net/" title="https:&#x2F;&#x2F;blog.daliansky.net&#x2F;" rel="noopener" target="_blank">黑果小兵</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://blog.skk.moe/" title="https:&#x2F;&#x2F;blog.skk.moe&#x2F;" rel="noopener" target="_blank">Sukka's Blog</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://blog.xjn819.com/" title="https:&#x2F;&#x2F;blog.xjn819.com&#x2F;" rel="noopener" target="_blank">Xjn's Blog</a>
        </li>
    </ul>
  </div>

      </section>
        <div class="back-to-top animated">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>
    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


    </header>

    
  <div class="reading-progress-bar"></div>
  <a role="button" class="book-mark-link book-mark-link-fixed"></a>

  <a href="https://github.com/zorroye" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner index posts-expand">
      

      
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://zorroye.github.io/posts/421653662/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="ZorroYe">
      <meta itemprop="description" content="升级认知，看透本质">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Ye's Blog">
    </span>

    
    
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/posts/421653662/" class="post-title-link" itemprop="url">ubuntu10.04安装64位ppstream</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2012-11-08 11:19:00" itemprop="dateCreated datePublished" datetime="2012-11-08T11:19:00+08:00">2012-11-08</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-08-18 10:28:04" itemprop="dateModified" datetime="2020-08-18T10:28:04+08:00">2020-08-18</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Ubuntu/" itemprop="url" rel="index"><span itemprop="name">Ubuntu</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Ubuntu/Q-A/" itemprop="url" rel="index"><span itemprop="name">Q&A</span></a>
                </span>
            </span>

          
            <span id="/posts/421653662/" class="post-meta-item leancloud_visitors" data-flag-title="ubuntu10.04安装64位ppstream" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="far fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/posts/421653662/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/posts/421653662/" itemprop="commentCount"></span>
    </a>
  </span>
  
  <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
              <span class="post-meta-item-text">本文字数：</span>
              <span>481</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
              <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>2 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>参考：<br><a target="_blank" rel="noopener" href="http://hi.baidu.com/flashgive/item/6904fb09798fc1e5fe240d33">http://hi.baidu.com/flashgive/item/6904fb09798fc1e5fe240d33</a>  </p>
<p>下载：<br><a target="_blank" rel="noopener" href="http://ppa.launchpad.net/cnav/ppa/ubuntu/pool/main/p/ppstream/ppstream/_1.0.0-3lucid2/_amd64.deb">http://ppa.launchpad.net/cnav/ppa/ubuntu/pool/main/p/ppstream/ppstream\_1.0.0-3lucid2\_amd64.deb</a><br><a target="_blank" rel="noopener" href="http://packages.ubuntu.com/zh-tw/lucid-updates/libphonon4">http://packages.ubuntu.com/zh-tw/lucid-updates/libphonon4</a>    下载32位版本的libphonon  </p>
<p>安装  </p>
<blockquote>
<p>安装ppstream没有出现什么错误  </p>
</blockquote>
<p>运行  </p>
<blockquote>
<p>运行时提示缺少libphonon.so.4文件<br>1.1我找了下系统的库文件，发现/usr/lib/下面有libphonon.so.4<br>1.2做了链接 sudo ln -s /usr/lib/libphonon.so.4 /opt/pps/lib/libphonon.so.4<br>1.3需要32位版本的。<br>2.1下载了32位版本的libphonon<br>2.2解压后把libphonon.so.4.4.0复制为/opt/pps/lib/libphonon.so.4<br>2.3正常了  </p>
</blockquote>
<p><img src="http://img9.ph.126.net/JfPH-3hX2qmGlGVh5kmQag==/6597818534074982489.jpg" alt="ubuntu10.04安装64位ppstream - leaf - ------坚持雅操------" title="ubuntu10.04安装64位ppstream - leaf - ------坚持雅操------"></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://zorroye.github.io/posts/3324366169/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="ZorroYe">
      <meta itemprop="description" content="升级认知，看透本质">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Ye's Blog">
    </span>

    
    
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/posts/3324366169/" class="post-title-link" itemprop="url">概述</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2012-11-07 11:09:00" itemprop="dateCreated datePublished" datetime="2012-11-07T11:09:00+08:00">2012-11-07</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-08-18 10:28:04" itemprop="dateModified" datetime="2020-08-18T10:28:04+08:00">2020-08-18</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Network/" itemprop="url" rel="index"><span itemprop="name">Network</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Network/base/" itemprop="url" rel="index"><span itemprop="name">base</span></a>
                </span>
            </span>

          
            <span id="/posts/3324366169/" class="post-meta-item leancloud_visitors" data-flag-title="概述" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="far fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/posts/3324366169/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/posts/3324366169/" itemprop="commentCount"></span>
    </a>
  </span>
  
  <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
              <span class="post-meta-item-text">本文字数：</span>
              <span>359</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
              <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>1 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>本书：计算机网络(第4版) 谢希仁编<br>原理清楚了，实现起来就容易了！  </p>
<p>交换网：  </p>
<blockquote>
<p>电路交换网：如电话系统。<br>报文交换网<br>分组交换网：采用存储转发技术。所有的分组转发的包都是有标记的。(标记的不一定就是序号)  </p>
<blockquote>
<blockquote>
<p>    后面的通信都是基于分组交换网构建。  </p>
</blockquote>
</blockquote>
</blockquote>
<p>广域网和局域网就是物理层和数据链路层的具体规范和应用。  </p>
<p>计算机网络的主要性能指标：带宽、时延  </p>
<blockquote>
<p>带宽：</p>
</blockquote>
<blockquote>
<blockquote>
<p>信号的频率，原指模拟信号的频带宽度。单位：Hz</p>
</blockquote>
<blockquote>
<p>数字信号沿用带宽叫法，单位：b/s</p>
</blockquote>
<blockquote>
</blockquote>
<blockquote>
<p>注：通信领域和计算机领域，对k，m，g算法不一样</p>
</blockquote>
</blockquote>
<blockquote>
<blockquote>
<blockquote>
<p>通信单位    1k=10^3 b/s</p>
</blockquote>
</blockquote>
<blockquote>
<blockquote>
<p>计算机单位1K=2^10 B  </p>
</blockquote>
</blockquote>
</blockquote>
<blockquote>
</blockquote>
<blockquote>
<p>时延：</p>
</blockquote>
<blockquote>
<blockquote>
<p>处理时延：车辆排队等待进站的时间</p>
</blockquote>
<blockquote>
<p>发送时延：车流从第一辆车进收费站高速到最后一辆进收费站的时间</p>
</blockquote>
<blockquote>
<p>传播时延：车在高速上的时间</p>
</blockquote>
</blockquote>
<blockquote>
</blockquote>
<blockquote>
</blockquote>
<p>网络协议：网络中数据交换的规则、标准</p>
<blockquote>
<p>网络协议包含：语法、语义、时序： 时序是指协议实现的顺序</p>
</blockquote>
<blockquote>
</blockquote>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://zorroye.github.io/posts/3972551888/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="ZorroYe">
      <meta itemprop="description" content="升级认知，看透本质">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Ye's Blog">
    </span>

    
    
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/posts/3972551888/" class="post-title-link" itemprop="url">十年一事无成</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2012-11-05 09:11:00" itemprop="dateCreated datePublished" datetime="2012-11-05T09:11:00+08:00">2012-11-05</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-08-18 10:28:04" itemprop="dateModified" datetime="2020-08-18T10:28:04+08:00">2020-08-18</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Live/" itemprop="url" rel="index"><span itemprop="name">Live</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Live/%E7%82%B9%E6%BB%B4/" itemprop="url" rel="index"><span itemprop="name">点滴</span></a>
                </span>
            </span>

          
            <span id="/posts/3972551888/" class="post-meta-item leancloud_visitors" data-flag-title="十年一事无成" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="far fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/posts/3972551888/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/posts/3972551888/" itemprop="commentCount"></span>
    </a>
  </span>
  
  <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
              <span class="post-meta-item-text">本文字数：</span>
              <span>48</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
              <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>1 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>2002年高中毕业，大学时没有确定学习方向，像个无头苍蝇乱学一气。到现在还在地面上爬行。。。。。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://zorroye.github.io/posts/2161474433/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="ZorroYe">
      <meta itemprop="description" content="升级认知，看透本质">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Ye's Blog">
    </span>

    
    
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/posts/2161474433/" class="post-title-link" itemprop="url">ubuntu14.04开启vnc服务</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2012-10-30 14:40:00" itemprop="dateCreated datePublished" datetime="2012-10-30T14:40:00+08:00">2012-10-30</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-08-18 10:28:04" itemprop="dateModified" datetime="2020-08-18T10:28:04+08:00">2020-08-18</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Ubuntu/" itemprop="url" rel="index"><span itemprop="name">Ubuntu</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Ubuntu/server/" itemprop="url" rel="index"><span itemprop="name">server</span></a>
                </span>
            </span>

          
            <span id="/posts/2161474433/" class="post-meta-item leancloud_visitors" data-flag-title="ubuntu14.04开启vnc服务" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="far fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/posts/2161474433/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/posts/2161474433/" itemprop="commentCount"></span>
    </a>
  </span>
  
  <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
              <span class="post-meta-item-text">本文字数：</span>
              <span>3k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
              <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>11 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>参考：<a target="_blank" rel="noopener" href="http://broderick-tech.com/vncxstartup-files-ubuntu-14-04/">http://broderick-tech.com/vncxstartup-files-ubuntu-14-04/</a><br>ubuntu14.04操作：前面的步骤跟ubuntu10.04一样的，只需要改一改xstartup即可  </p>
<p>#!/bin/sh<br>def<br>export XKL_XMODMAP_DISABLE=1<br>unset SESSION_MANAGER<br>unset DBUS_SESSION_BUS_ADDRESS  </p>
<p>gnome-panel &amp;<br>gnome-settings-daemon &amp;<br>metacity &amp;<br>nautilus &amp;<br>gnome-terminal &amp;  </p>
<p>效果  </p>
<p><img src="http://img2.ph.126.net/5w9tvL6jeHMrOgSmaN2J_Q==/6598112103739446374.png" alt="ubuntu14.04开启vnc服务 - leaf - ------勤解万难------" title="ubuntu14.04开启vnc服务 - leaf - ------勤解万难------"></p>
<p>   </p>
<p>备注：一般我们都用ssh连接  </p>
<p>实验配置：<br>服务器：ubuntu10.04 X86，win7<br>客户端：ubuntu10.04 X64  </p>
<p>客户端：  </p>
<blockquote>
<p>安装命令：sudo apt-get install vncviewer<br>连接命令：vncviewer  172.16.43.135:1    #连入ubuntu  </p>
<blockquote>
<blockquote>
<p>vncviewer  172.16.43.135       #连入win7  </p>
</blockquote>
</blockquote>
</blockquote>
<p>win7服务端：  </p>
<blockquote>
<p>加密选项：设置为：更喜欢打开<br>这是为了防止：No configured security type is supported by 3.3 viewer  </p>
</blockquote>
<p>ubuntu服务器端：  </p>
<blockquote>
<p>安装：sudo apt-get install vnc4server  </p>
</blockquote>
<blockquote>
<p>当前用户输入：  </p>
<blockquote>
<p>vnc4server  :1<br>输入密码  </p>
</blockquote>
<p>会建立.vnc目录：passwd  xstartup  ywz-desktop:1.log  ywz-desktop:1.pid  </p>
</blockquote>
<blockquote>
<p>xstartup默认配置如下：  </p>
</blockquote>
<blockquote>
<p>#!/bin/sh<br># Uncomment the following two lines for normal desktop:<br># unset SESSION_MANAGER<br># exec /etc/X11/xinit/xinitrc<br>[ -x /etc/vnc/xstartup ] &amp;&amp; exec /etc/vnc/xstartup<br>[ -r $HOME/.Xresources ] &amp;&amp; xrdb $HOME/.Xresources<br>xsetroot -solid grey<br>vncconfig -iconic &amp;<br>x-terminal-emulator -geometry 80x24+10+10 -ls -title “$VNCDESKTOP Desktop” &amp;<br>x-window-manager &amp;</p>
</blockquote>
<p>1、修改配置：  </p>
<blockquote>
<p>修改配置的目的：能进图形界面，而不是字符界面<br>也为了解决：could not acquire name on session bus  </p>
</blockquote>
<blockquote>
<p>#!/bin/sh<br># Uncomment the following two lines for normal desktop:<br>unset SESSION_MANAGER<br>exec /etc/X11/xinit/xinitrc<br>[ -x /etc/vnc/xstartup ] &amp;&amp; exec /etc/vnc/xstartup<br>[ -r $HOME/.Xresources ] &amp;&amp; xrdb $HOME/.Xresources<br>#xsetroot -solid grey<br>#vncconfig -iconic &amp;<br>#x-terminal-emulator -geometry 80x24+10+10 -ls -title “$VNCDESKTOP Desktop” &amp;<br>#x-window-manager &amp;</p>
</blockquote>
<p>2、修改/etc/X11/xinit/xinitrc权限：sudo chmod a+x /etc/X11/xinit/xinitrc<br>3、设置防火墙：  </p>
<blockquote>
<p>netstat -tunlp  </p>
<blockquote>
<p>tcp        0      0 0.0.0.0:6001            0.0.0.0:*               LISTEN      5080/Xvnc4           <br>tcp6      0     0 :::5901                      :::*                        LISTEN      5080/Xvnc4    </p>
</blockquote>
<p>sudo ufw allow from 172.16.43.100 to any port 5901  </p>
</blockquote>
<p>4、然后重启vnc4server  </p>
<blockquote>
<p>vnc4server -kill :1<br>vnc4server :1      #:1表示开启第一个界面  </p>
</blockquote>
<p>5、开机自启动vnc服务<br>sudo gedit  /etc/init.d/vncserver  </p>
<blockquote>
<p>`#!/bin/sh -e  </p>
<h3 id="BEGIN-INIT-INFO"><a href="#BEGIN-INIT-INFO" class="headerlink" title="BEGIN INIT INFO"></a>BEGIN INIT INFO</h3><h1 id="Provides-vncserver"><a href="#Provides-vncserver" class="headerlink" title="Provides:          vncserver"></a>Provides:          vncserver</h1><h1 id="Required-Start-networking"><a href="#Required-Start-networking" class="headerlink" title="Required-Start:    networking"></a>Required-Start:    networking</h1><h1 id="Default-Start-3-4-5"><a href="#Default-Start-3-4-5" class="headerlink" title="Default-Start:     3 4 5"></a>Default-Start:     3 4 5</h1><h1 id="Default-Stop-0-6"><a href="#Default-Stop-0-6" class="headerlink" title="Default-Stop:      0 6"></a>Default-Stop:      0 6</h1><h3 id="END-INIT-INFO"><a href="#END-INIT-INFO" class="headerlink" title="END INIT INFO`"></a>END INIT INFO`</h3><p><code>PATH=&quot;$PATH:/usr/X11R6/bin/&quot;</code></p>
<p><code># The Username:Group that will run VNC   export USER=&quot;使用哪个账户来远程连接&quot;   #$&#123;RUNAS&#125;</code></p>
<p><code># The display that VNC will use   DISPLAY=&quot;1&quot;</code></p>
<p><code># Color depth (between 8 and 32)   DEPTH=&quot;24&quot;</code></p>
<p><code># The Desktop geometry to use.   #GEOMETRY=&quot;&lt;WIDTH&gt;x&lt;HEIGHT&gt;&quot;   GEOMETRY=&quot;800x600&quot;   #GEOMETRY=&quot;1024x768&quot;   #GEOMETRY=&quot;1280x1024&quot;</code></p>
<p><code># The name that the VNC Desktop will have.   NAME=&quot;vnc-server&quot;</code></p>
<p><code>OPTIONS=&quot;-name $&#123;NAME&#125; -depth $&#123;DEPTH&#125; -geometry $&#123;GEOMETRY&#125; :$&#123;DISPLAY&#125;&quot;</code></p>
<p><code>. /lib/lsb/init-functions</code></p>
<p><code>case &quot;$1&quot; in   start)   log_action_begin_msg &quot;Starting vncserver for user &#39;$&#123;USER&#125;&#39; on localhost:$&#123;DISPLAY&#125;&quot;   su $&#123;USER&#125; -c &quot;/usr/bin/vnc4server $&#123;OPTIONS&#125;&quot;   ;;</code></p>
<p><code>stop)   log_action_begin_msg &quot;Stoping vncserver for user &#39;$&#123;USER&#125;&#39; on localhost:$&#123;DISPLAY&#125;&quot;   su $&#123;USER&#125; -c &quot;/usr/bin/vnc4server -kill :$&#123;DISPLAY&#125;&quot;   ;;</code></p>
<p><code>restart)   $0 stop   $0 start   ;;   esac</code></p>
<p><code>exit 0</code></p>
</blockquote>
<p><code>sudo chmod +x /etc/init.d/vncserver   ``sudo update-rc.d vncserver defaults</code>  </p>
<p>参考：<br><a target="_blank" rel="noopener" href="http://www.linuxidc.com/Linux/2011-10/46228.htm">http://www.linuxidc.com/Linux/2011-10/46228.htm</a><br><a target="_blank" rel="noopener" href="http://www.abdevelopment.ca/blog/start-vnc-server-ubuntu-boot">http://www.abdevelopment.ca/blog/start-vnc-server-ubuntu-boot</a>  </p>
<p><img src="http://img8.ph.126.net/s4wmt5pmV-QYi5ZwIq8wvg==/6597163225146148528.jpg" alt="ubuntu开启vnc服务 - leaf - ------坚持雅操------" title="ubuntu开启vnc服务 - leaf - ------坚持雅操------"></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://zorroye.github.io/posts/768145412/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="ZorroYe">
      <meta itemprop="description" content="升级认知，看透本质">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Ye's Blog">
    </span>

    
    
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/posts/768145412/" class="post-title-link" itemprop="url">BLFS-1:补充软件</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2012-10-26 12:55:00" itemprop="dateCreated datePublished" datetime="2012-10-26T12:55:00+08:00">2012-10-26</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-08-18 10:28:04" itemprop="dateModified" datetime="2020-08-18T10:28:04+08:00">2020-08-18</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/lfs/" itemprop="url" rel="index"><span itemprop="name">lfs</span></a>
                </span>
            </span>

          
            <span id="/posts/768145412/" class="post-meta-item leancloud_visitors" data-flag-title="BLFS-1:补充软件" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="far fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/posts/768145412/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/posts/768145412/" itemprop="commentCount"></span>
    </a>
  </span>
  
  <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
              <span class="post-meta-item-text">本文字数：</span>
              <span>1.8k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
              <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>7 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>没有wget，下载很不方便，没有openssh，所有代码都要自己输很不方便，所以安装<br>1、wget  </p>
<blockquote>
<p>cd /root/sources<br>ftp ftp.gnu.org  </p>
<blockquote>
<p>用户名：anonymous  </p>
</blockquote>
<blockquote>
<p>cd gnu<br>cd wget<br>get wget-1.11.1.tar.bz2  </p>
</blockquote>
<p>bye<br>cd ../build<br>tar -xvf ../sources/wget-1.11.1.tar.bz2<br>cd wget-1.11.1  </p>
<blockquote>
<p>./configure –prefix=/usr –sysconfdir=/etc<br>make &amp;&amp; make install  </p>
</blockquote>
<p>cd ..  </p>
</blockquote>
<p>2、gdbm  </p>
<blockquote>
<p>按孙海勇的书装了这个。  </p>
</blockquote>
<blockquote>
<p>wget <a href="ftp://ftp.gnu.org/gnu/gdbm/gdbm-1.8.3.tar.gz">ftp://ftp.gnu.org/gnu/gdbm/gdbm-1.8.3.tar.gz</a><br>vi /etc/passwd  </p>
<blockquote>
<p>bin:x:2:2:bin:/bin:/bin/sh  </p>
</blockquote>
<p>./configure –prefix=/usr<br>make &amp;&amp; make install<br>make install-compat  </p>
</blockquote>
<p>3、openssl  </p>
<blockquote>
<p>wget <a target="_blank" rel="noopener" href="http://www.openssl.org/source/openssl-0.9.8l.tar.gz">http://www.openssl.org/source/openssl-0.9.8l.tar.gz</a><br>wget <a target="_blank" rel="noopener" href="http://www.linuxfromscratch.org/patches/downloads/openssl/openssl-0.9.8l-fix/_manpages-1.patch">http://www.linuxfromscratch.org/patches/downloads/openssl/openssl-0.9.8l-fix\_manpages-1.patch</a>  </p>
</blockquote>
<blockquote>
<p>./config –prefix=/usr \  </p>
<blockquote>
<p>--openssldir=/etc/ssl shared zlib-dynamic  </p>
</blockquote>
<p>make<br>make test<br>make MANDIR=/usr/share/man install<br>install -v -d -m755 /usr/share/doc/openssl-0.9.8l<br>cp -v -r doc/{HOWTO,README,*.{txt,html,gif}} /usr/share/doc/openssl-0.9.8l  </p>
</blockquote>
<p>4、openssh  </p>
<blockquote>
<p>安装<br>openssh需要openssl和  </p>
</blockquote>
<blockquote>
<p>wget <a target="_blank" rel="noopener" href="http://ftp.openbsd.org/pub/OpenBSD/OpenSSH/portable/openssh-5.3p1.tar.gz">http://ftp.openbsd.org/pub/OpenBSD/OpenSSH/portable/openssh-5.3p1.tar.gz</a>    #要大写<br>install -v -m700 -d /var/lib/sshd<br>chown -v root:sys /var/lib/sshd<br>groupadd -g 50 sshd<br>useradd -c ‘sshd PrivSep’ -d /var/lib/sshd -g sshd \  </p>
<blockquote>
<p>-s /bin/false -u 50 sshd  </p>
</blockquote>
<p>sed -i.orig ‘s@-lcrypto@/usr/lib/libcrypto.a -ldl@’ configure<br>./configure –prefix=/usr –sysconfdir=/etc/ssh \  </p>
<blockquote>
<p>--datadir=/usr/share/sshd \<br>--libexecdir=/usr/lib/openssh –with-md5-passwords \<br>--with-privsep-path=/var/lib/sshd  </p>
</blockquote>
<p>make<br>make install<br>install -v -m755 -d /usr/share/doc/openssh-5.3p1<br>install -v -m644 INSTALL LICENCE OVERVIEW README* WARNING.RNG /usr/share/doc/openssh-5.3p1<br>配置<br>从livedcd里面拷过来就好了<br>从livedcd启动，位置：/etc/rc.d/init.d/sshd<br>添加系统启动自启动<br>cd /etc/rc.d/init.d &amp;&amp;<br>ln -sf ../init.d/sshd ../rc0.d/K30sshd &amp;&amp;<br>ln -sf ../init.d/sshd ../rc1.d/K30sshd &amp;&amp;<br>ln -sf ../init.d/sshd ../rc2.d/K30sshd &amp;&amp;<br>ln -sf ../init.d/sshd ../rc3.d/S30sshd &amp;&amp;<br>ln -sf ../init.d/sshd ../rc4.d/S30sshd &amp;&amp;<br>ln -sf ../init.d/sshd ../rc5.d/S30sshd &amp;&amp;<br>ln -sf ../init.d/sshd ../rc6.d/K30sshd  </p>
</blockquote>
<p><img src="http://img9.ph.126.net/3LjXwKiwwVW1LWjdc4IFZg==/1647754513681411459.jpg" alt="BLFS-1:安装wget、ssh等软件 - leaf - ------坚持雅操------" title="BLFS-1:安装wget、ssh等软件 - leaf - ------坚持雅操------"></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://zorroye.github.io/posts/3062845074/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="ZorroYe">
      <meta itemprop="description" content="升级认知，看透本质">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Ye's Blog">
    </span>

    
    
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/posts/3062845074/" class="post-title-link" itemprop="url">LFS制作-5、完成制作</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2012-10-25 16:40:00" itemprop="dateCreated datePublished" datetime="2012-10-25T16:40:00+08:00">2012-10-25</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-08-18 10:28:04" itemprop="dateModified" datetime="2020-08-18T10:28:04+08:00">2020-08-18</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/lfs/" itemprop="url" rel="index"><span itemprop="name">lfs</span></a>
                </span>
            </span>

          
            <span id="/posts/3062845074/" class="post-meta-item leancloud_visitors" data-flag-title="LFS制作-5、完成制作" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="far fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/posts/3062845074/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/posts/3062845074/" itemprop="commentCount"></span>
    </a>
  </span>
  
  <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
              <span class="post-meta-item-text">本文字数：</span>
              <span>1.3k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
              <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>5 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>1、chroot</p>
<p>chroot “$LFS” /usr/bin/env -i \</p>
<p>    HOME=/root TERM=”$TERM” PS1=’\u:\w\$ ‘ \</p>
<p>    PATH=/bin:/usr/bin:/sbin:/usr/sbin \</p>
<p>    /bin/bash –login</p>
<p>2、配置系统脚本</p>
<p>LFS-Bootscripts-6.3 </p>
<blockquote>
<p>包含一套在 LFS 系统启动和关闭时的启动和停止脚本</p>
<p>脚本：halt、reboot、ifup、ifdown、udev、</p>
</blockquote>
<p>cat &gt; /etc/sysconfig/clock &lt;&lt; “EOF”</p>
<blockquote>
<p>UTC=0</p>
</blockquote>
<p>EOF</p>
<p>cat &gt; /etc/inputrc &lt;&lt; “EOF”</p>
<p>cat &gt; /etc/profile &lt;&lt; “EOF”</p>
<blockquote>
<p>export LANG=en_US.UTF-8</p>
<p>export INPUTRC=/etc/inputrc<br>alias ls=”ls –color”  </p>
<p>export PS1=’\u:\w\$’</p>
</blockquote>
<p>EOF</p>
<p>echo “HOSTNAME=leaf” &gt; /etc/sysconfig/network</p>
<p>cat &gt; /etc/hosts &lt;&lt; “EOF”</p>
<blockquote>
<p>127.0.0.1 leaf localhost</p>
</blockquote>
<p>EOF</p>
<p>cd /etc/sysconfig/network-devices</p>
<p>mkdir -v ifconfig.eth0</p>
<p>cat &gt; ifconfig.eth0/ipv4 &lt;&lt; “EOF”</p>
<blockquote>
<p>ONBOOT=yes</p>
<p>SERVICE=ipv4-static</p>
<p>IP=172.16.43.100</p>
<p>GATEWAY=172.16.43.2</p>
<p>PREFIX=24</p>
<p>BROADCAST=172.16.43.255</p>
</blockquote>
<p>EOF</p>
<p>cat &gt; /etc/resolv.conf &lt;&lt; “EOF”</p>
<blockquote>
<p>nameserver 172.16.43.2 </p>
</blockquote>
<p>EOF</p>
<p>cat &gt; /etc/fstab &lt;&lt; “EOF”</p>
<p>3、安装核心</p>
<p>Linux-2.6.22.5 </p>
<p>make mrproper</p>
<p>make menuconfig  #参考孙海勇的设置</p>
<p>make</p>
<p>make modules_install</p>
<p>cp -v arch/i386/boot/bzImage /boot/lfskernel-2.6.22.5</p>
<p>cp -v System.map /boot/System.map-2.6.22.5</p>
<p>cp -v .config /boot/config-2.6.22.5</p>
<p>install -d /usr/share/doc/linux-2.6.22.5</p>
<p>cp -r Documentation/* /usr/share/doc/linux-2.6.22.5</p>
<p>4、stage写入MBR</p>
<p>配置了软驱</p>
<p>dd if=/boot/grub/stage1 of=/dev/fd0 bs=512 count=1</p>
<p>dd if=/boot/grub/stage2 of=/dev/fd0 bs=512 seek=1</p>
<p>grub</p>
<blockquote>
<p>root (hd0,0)</p>
<p>setup (hd0)</p>
</blockquote>
<p>quit</p>
<p>cat &gt; /boot/grub/menu.lst &lt;&lt; “EOF”</p>
<p>mkdir -v /etc/grub</p>
<p>ln -sv /boot/grub/menu.lst /etc/grub</p>
<p>5、完成制作</p>
<p>echo 6.3 &gt; /etc/lfs-release</p>
<p>sync</p>
<p>reboot</p>
<p>制作完毕！：-)</p>
<p><img src="http://img2.ph.126.net/aXVFRIrHp03lrh9b3NOsRQ==/6597672299028385782.jpg" alt="LFS制作-5、完成制作 - leaf - ------坚持雅操------" title="LFS制作-5、完成制作 - leaf - ------坚持雅操------"></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://zorroye.github.io/posts/2307134587/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="ZorroYe">
      <meta itemprop="description" content="升级认知，看透本质">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Ye's Blog">
    </span>

    
    
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/posts/2307134587/" class="post-title-link" itemprop="url">LFS制作-4、目标系统-3必要程序</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2012-10-25 16:31:00" itemprop="dateCreated datePublished" datetime="2012-10-25T16:31:00+08:00">2012-10-25</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-08-18 10:28:04" itemprop="dateModified" datetime="2020-08-18T10:28:04+08:00">2020-08-18</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/lfs/" itemprop="url" rel="index"><span itemprop="name">lfs</span></a>
                </span>
            </span>

          
            <span id="/posts/2307134587/" class="post-meta-item leancloud_visitors" data-flag-title="LFS制作-4、目标系统-3必要程序" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="far fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/posts/2307134587/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/posts/2307134587/" itemprop="commentCount"></span>
    </a>
  </span>
  
  <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
              <span class="post-meta-item-text">本文字数：</span>
              <span>11k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
              <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>42 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>Berkeley DB-4.5.20</p>
<blockquote>
<p>包含一些程序和工具，供其他的一些程序来在做数据库相关函数时调用<br>-—————-<br>patch -Np1 -i ../db-4.5.20-fixes-1.patch<br>cd build_unix<br>../dist/configure –prefix=/usr –enable-compat185 –enable-cxx<br>make<br>make docdir=/usr/share/doc/db-4.5.20 install<br>chown -Rv root:root /usr/share/doc/db-4.5.20  </p>
</blockquote>
<p>Sed-4.1.5</p>
<blockquote>
<p>sed编辑器<br>-—————<br>./configure –prefix=/usr –bindir=/bin –enable-html<br>make<br>make install  </p>
</blockquote>
<p>E2fsprogs-1.40.2</p>
<blockquote>
<p>提供用于 ext2 文件系统的工具。它还支持 ext3 日志文件系统</p>
<p>包含命令：chattr、lsattr、mkfs、fsck等<br>-————–<br>sed -i -e ‘s@/bin/rm@/tools&amp;@’ lib/blkid/test_probe.in<br>mkdir -v build<br>cd build<br>../configure –prefix=/usr –with-root-prefix=”” \<br>    –enable-elf-shlibs<br>make<br>make install<br>make<br>make install-libs  </p>
</blockquote>
<p>Coreutils-6.9</p>
<blockquote>
<p>包括一套显示、设置基本系统属性的工具</p>
<p>包含命令：chroot、chown、cp、dd、dir、env、ln、ls、mkdir、mv、rm、seq、tee、touch、tty等</p>
<p>安装位置/usr，移动命令到/bin 、/sbin下<br>-———————–<br>patch -Np1 -i ../coreutils-6.9-uname-1.patch<br>patch -Np1 -i ../coreutils-6.9-suppress_uptime_kill_su-1.patch<br>patch -Np1 -i ../coreutils-6.9-i18n-1.patch<br>chmod +x tests/sort/sort-mb-tests<br>./configure –prefix=/usr<br>make<br>make install<br>mv -v /usr/bin/{cat,chgrp,chmod,chown,cp,date,dd,df,echo} /bin<br>mv -v /usr/bin/{false,hostname,ln,ls,mkdir,mknod,mv,pwd,readlink,rm} /bin<br>mv -v /usr/bin/{rmdir,stty,sync,true,uname} /bin<br>mv -v /usr/bin/chroot /usr/sbin<br>mv -v /usr/bin/{head,sleep,nice} /bin  </p>
</blockquote>
<p>Iana-Etc-2.20</p>
<blockquote>
<p>提供了网络服务和协议的数据</p>
<p>安装文件：/etc/protocols, /etc/services<br>-———————-<br>make<br>make install  </p>
</blockquote>
<p>M4-1.4.10</p>
<blockquote>
<p>宏处理器<br>-——————–<br>./configure –prefix=/usr<br>make<br>make install  </p>
</blockquote>
<p>Bison-2.3</p>
<blockquote>
<p>语法分析程序生成器</p>
<p>命令：bison、yacc<br>-———————<br>./configure –prefix=/usr<br>echo ‘#define YYENABLE_NLS 1’ &gt;&gt; config.h<br>make<br>make install  </p>
</blockquote>
<p>Ncurses-5.6</p>
<blockquote>
<p>提供字符终端处理库，包括面板和菜单</p>
<p>命令：clear、reset等<br>-———————-<br>patch -Np1 -i ../ncurses-5.6-coverity_fixes-1.patch<br>./configure –prefix=/usr –with-shared –without-debug –enable-widec<br>make<br>make install<br>chmod -v 644 /usr/lib/libncurses++w.a<br>mv -v /usr/lib/libncursesw.so.5* /lib<br>ln -sfv ../../lib/libncursesw.so.5 /usr/lib/libncursesw.so<br>for lib in curses ncurses form panel menu ; do \<br>    rm -vf /usr/lib/lib${lib}.so ; \<br>    echo “INPUT(-l${lib}w)” &gt;/usr/lib/lib${lib}.so ; \<br>    ln -sfv lib${lib}w.a /usr/lib/lib${lib}.a ; \<br>done<br>ln -sfv libncurses++w.a /usr/lib/libncurses++.a<br>rm -vf /usr/lib/libcursesw.so<br>echo “INPUT(-lncursesw)” &gt;/usr/lib/libcursesw.so<br>ln -sfv libncurses.so /usr/lib/libcurses.so<br>ln -sfv libncursesw.a /usr/lib/libcursesw.a<br>ln -sfv libncurses.a /usr/lib/libcurses.a  </p>
</blockquote>
<p>Procps-3.2.7</p>
<blockquote>
<p>用于监视系统进程的程序</p>
<p>命令：free、top、ps、uptime、kill等<br>-———————<br>make<br>make install  </p>
</blockquote>
<p>Libtool-1.5.24</p>
<blockquote>
<p>通用库支持脚本，将使用动态库的复杂性隐藏在统一的、可移植的接口中<br>-——————–<br>./configure –prefix=/usr<br>make<br>make install  </p>
</blockquote>
<p>Perl-5.8.8</p>
<blockquote>
<p>编程语言，各编程语言转换等用处<br>-—————-<br>echo “127.0.0.1 localhost leaf” &gt; /etc/hosts<br>./configure.gnu –prefix=/usr \<br>    -Dman1dir=/usr/share/man/man1 \<br>    -Dman3dir=/usr/share/man/man3 \<br>    -Dpager=”/usr/bin/less -isR”<br>make<br>make install  </p>
</blockquote>
<p>Readline-5.2</p>
<blockquote>
<p>提供命令行编辑和历史纪录功能的库集合<br>-——————–<br>sed -i ‘/MV.*old/d’ Makefile.in<br>sed -i ‘/{OLDSUFF}/c:’ support/shlib-install<br>patch -Np1 -i ../readline-5.2-fixes-3.patch<br>./configure –prefix=/usr –libdir=/lib<br>make SHLIB_LIBS=-lncurses<br>make install<br>mv -v /lib/lib{readline,history}.a /usr/lib<br>rm -v /lib/lib{readline,history}.so<br>ln -sfv ../../lib/libreadline.so.5 /usr/lib/libreadline.so<br>ln -sfv ../../lib/libhistory.so.5 /usr/lib/libhistory.so  </p>
</blockquote>
<p>Zlib-1.2.3</p>
<blockquote>
<p>很多程序中的压缩或者解压缩程序都会用到这个库<br>-——————–<br>./configure –prefix=/usr –shared –libdir=/lib<br>make<br>make install<br>rm -v /lib/libz.so<br>ln -sfv ../../lib/libz.so.1.2.3 /usr/lib/libz.so<br>make clean<br>./configure –prefix=/usr<br>make<br>make install<br>chmod -v 644 /usr/lib/libz.a  </p>
</blockquote>
<p>Autoconf-2.61</p>
<blockquote>
<p>生成用于自动配置源代码的 shell 脚本</p>
<p>命令：autoconf、autoheader等<br>-——————-<br>./configure –prefix=/usr<br>make<br>make install  </p>
</blockquote>
<p>Automake-1.10</p>
<blockquote>
<p>与 Autoconf 配合使用，产生 Makefile 文件<br>-——————<br>./configure –prefix=/usr<br>make<br>make install  </p>
</blockquote>
<p>Bash-3.2</p>
<blockquote>
<p>bash shell<br>-———————<br>tar -xvf ../bash-doc-3.2.tar.gz<br>sed -i “s|htmldir = @htmldir@|htmldir = /usr/share/doc/bash-3.2|” \<br>    Makefile.in<br>patch -Np1 -i ../bash-3.2-fixes-5.patch<br>./configure –prefix=/usr –bindir=/bin \<br>    –without-bash-malloc –with-installed-readline<br>make<br>sed -i ‘s/LANG/LC_ALL/‘ tests/intl.tests<br>sed -i ‘s@tests@&amp; &lt;/dev/tty@’ tests/run-test<br>chown -Rv nobody ./<br>su-tools nobody -s /bin/bash -c “make tests”<br>make install<br>exec /bin/bash –login +h  </p>
</blockquote>
<p>Bzip2-1.0.4</p>
<blockquote>
<p>包含了对文件进行压缩和解压缩的工具<br>-———————<br>patch -Np1 -i ../bzip2-1.0.4-install_docs-1.patch<br>make -f Makefile-libbz2_so<br>make clean<br>make<br>make PREFIX=/usr install<br>cp -v bzip2-shared /bin/bzip2<br>cp -av libbz2.so* /lib<br>ln -sv ../../lib/libbz2.so.1.0 /usr/lib/libbz2.so<br>rm -v /usr/bin/{bunzip2,bzcat,bzip2}<br>ln -sv bzip2 /bin/bunzip2<br>ln -sv bzip2 /bin/bzcat  </p>
</blockquote>
<p>Diffutils-2.8.1</p>
<blockquote>
<p>显示两个文件或目录的差异</p>
<p>命令：cmp、diff<br>-———————–<br>patch -Np1 -i ../diffutils-2.8.1-i18n-1.patch<br>touch man/diff.1<br>./configure –prefix=/usr<br>make<br>make install  </p>
</blockquote>
<p>File-4.21</p>
<blockquote>
<p>用来判断文件类型的工具</p>
<p>命令：file<br>-————————<br>./configure –prefix=/usr<br>make<br>make install  </p>
</blockquote>
<p>Findutils-4.2.31</p>
<blockquote>
<p>查找文件的工具</p>
<p>命令：find、updatedb、locate、xargs<br>-———————-<br>./configure –prefix=/usr –libexecdir=/usr/lib/findutils \<br>    –localstatedir=/var/lib/locate<br>make<br>make install<br>mv -v /usr/bin/find /bin<br>sed -i -e ‘s/find:=${BINDIR}/find:=\/bin/‘ /usr/bin/updatedb  </p>
</blockquote>
<p>Flex-2.5.33</p>
<blockquote>
<p>能生成识别文本模式的程序的工具<br>-——————-<br>./configure –prefix=/usr<br>make<br>make install<br>ln -sv libfl.a /usr/lib/libl.a  </p>
<blockquote>
<p>cat &gt; /usr/bin/lex &lt;&lt; “EOF”<br>#!/bin/sh<br># Begin /usr/bin/lex  </p>
<p>exec /usr/bin/flex -l “$@”  </p>
<p># End /usr/bin/lex<br>EOF  </p>
</blockquote>
<p>chmod -v 755 /usr/bin/lex  </p>
</blockquote>
<p>GRUB-0.97</p>
<blockquote>
<p>包含 GRand 统一引导装载程序<br>-—————-<br>patch -Np1 -i ../grub-0.97-disk_geometry-1.patch<br>./configure –prefix=/usr<br>make<br>make install<br>mkdir -v /boot/grub<br>cp -v /usr/lib/grub/i386-pc/stage{1,2} /boot/grub  </p>
</blockquote>
<p>Gawk-3.1.5</p>
<blockquote>
<p>包含用于管理文本文件的程序</p>
<p>命令：awk等<br>-——————–<br>patch -Np1 -i ../gawk-3.1.5-segfault_fix-1.patch<br>./configure –prefix=/usr –libexecdir=/usr/lib  </p>
<blockquote>
<p>cat &gt;&gt; config.h &lt;&lt; “EOF”<br>#define HAVE_LANGINFO_CODESET 1<br>#define HAVE_LC_MESSAGES 1<br>EOF  </p>
</blockquote>
<p>make<br>make install  </p>
</blockquote>
<p>Gettext-0.16.1</p>
<blockquote>
<p>系统的国际化和本地化<br>-—————<br>./configure –prefix=/usr<br>make<br>make install  </p>
</blockquote>
<p>Grep-2.5.1a</p>
<blockquote>
<p>搜索文件中符合指定匹配模式的行</p>
<p>命令：grep<br>-————–<br>patch -Np1 -i ../grep-2.5.1a-redhat_fixes-2.patch<br>chmod +x tests/fmbtest.sh<br>./configure –prefix=/usr –bindir=/bin<br>make<br>make install  </p>
</blockquote>
<p>Groff-1.18.1.4</p>
<blockquote>
<p>包含几个处理和格式化文本的程序<br>-—————-<br>patch -Np1 -i ../groff-1.18.1.4-debian_fixes-1.patch<br>sed -i -e ‘s/2010/002D/‘ -e ‘s/2212/002D/‘ \<br>    -e ‘s/2018/0060/‘ -e ‘s/2019/0027/‘ font/devutf8/R.proto<br>PAGE=A4 ./configure –prefix=/usr –enable-multibyte<br>make<br>make install<br>ln -sv eqn /usr/bin/geqn<br>ln -sv tbl /usr/bin/gtbl  </p>
</blockquote>
<p>Gzip-1.3.12</p>
<blockquote>
<p>压缩和解压文件的程序<br>-——————-<br>./configure –prefix=/usr –bindir=/bin<br>make<br>make install<br>mv -v /bin/{gzexe,uncompress,zcmp,zdiff,zegrep} /usr/bin<br>mv -v /bin/{zfgrep,zforce,zgrep,zless,zmore,znew} /usr/bin  </p>
</blockquote>
<p>Inetutils-1.5</p>
<blockquote>
<p>包含基本的网络程序</p>
<p>配置文件:/etc</p>
<p>命令：ping、ftp、telnet等<br>-——————-<br>patch -Np1 -i ../inetutils-1.5-no_server_man_pages-2.patch<br>./configure –prefix=/usr –libexecdir=/usr/sbin \<br>    –sysconfdir=/etc –localstatedir=/var \<br>    –disable-ifconfig –disable-logger –disable-syslogd \<br>    –disable-whois –disable-servers<br>make<br>make install<br>mv -v /usr/bin/ping /bin  </p>
</blockquote>
<p>IPRoute2-2.6.20-070313</p>
<blockquote>
<p>基本的和高级的基于 IPv4 网络的程序</p>
<p>命令：ip、arpd守护程序、<br>-—————-<br>sed -i -e ‘/tc-bfifo.8/d’ -e ‘/tc-pfifo.8/s/pbfifo/bfifo/‘ Makefile<br>make SBINDIR=/sbin<br>make SBINDIR=/sbin install<br>mv -v /sbin/arpd /usr/sbin  </p>
</blockquote>
<p>Kbd-1.12</p>
<blockquote>
<p>键盘映射表和键盘工具<br>-——————-<br>patch -Np1 -i ../kbd-1.12-backspace-1.patch<br>patch -Np1 -i ../kbd-1.12-gcc4_fixes-1.patch<br>./configure –datadir=/lib/kbd<br>make<br>make install<br>mv -v /usr/bin/{kbd_mode,openvt,setfont} /bin  </p>
</blockquote>
<p>Less-406</p>
<blockquote>
<p>一个文本文件查看器</p>
<p>命令：less<br>-———————<br>./configure –prefix=/usr –sysconfdir=/etc<br>make<br>make install  </p>
</blockquote>
<p>Make-3.81</p>
<blockquote>
<p>自动地确定一个大型程序的哪些片段需要重新编译，并且发出命令去重新编译它们</p>
<p>应该和autoconf和automake有关系<br>-——————–<br>./configure –prefix=/usr<br>make<br>make install  </p>
</blockquote>
<p>Man-DB-2.4.4</p>
<blockquote>
<p>查找和显示 man 手册页的程序</p>
<p>命令：man等</p>
<p>-———————<br>sed -i -e ‘\%\t/usr/man%d’ -e ‘\%\t/usr/local/man%d’ src/man_db.conf.in</p>
<blockquote>
<p>cat &gt;&gt; include/manconfig.h.in &lt;&lt; “EOF”</p>
</blockquote>
</blockquote>
<blockquote>
<blockquote>
<p>#define WEB_BROWSER “exec /usr/bin/lynx”</p>
</blockquote>
<blockquote>
<p>#define COL “/usr/bin/col”</p>
</blockquote>
<blockquote>
<p>#define VGRIND “/usr/bin/vgrind”</p>
</blockquote>
<blockquote>
<p>#define GRAP “/usr/bin/grap”</p>
</blockquote>
</blockquote>
<blockquote>
<blockquote>
<p>EOF</p>
</blockquote>
<p>patch -Np1 -i ../man-db-2.4.4-fixes-1.patch</p>
<p>./configure –prefix=/usr –enable-mb-groff –disable-setuid</p>
<p>make &amp;&amp; make install  </p>
</blockquote>
<p>Mktemp-1.5</p>
<blockquote>
<p>包含用于在 shell 脚本中创建安全临时文件的程序<br>-——————–<br>patch -Np1 -i ../mktemp-1.5-add_tempfile-3.patch<br>./configure –prefix=/usr –with-libc<br>make<br>make install<br>make install-tempfile  </p>
</blockquote>
<p>Module-Init-Tools-3.2.2</p>
<blockquote>
<p>处理 2.5.47 及以上版本的内核模块时使用的工具</p>
<p>命令：modprobe、insmod、depmod、lsmod</p>
<p>安装位置:/sbin<br>-——————<br>patch -Np1 -i ../module-init-tools-3.2.2-modprobe-1.patch<br>./configure<br>make check<br>make distclean<br>./configure –prefix=/ –enable-zlib<br>make<br>make INSTALL=install install  </p>
</blockquote>
<p>Patch-2.5.4</p>
<blockquote>
<p>补丁命令，一般和diff一起用</p>
</blockquote>
<blockquote>
<p>命令：patch<br>-—————-<br>./configure –prefix=/usr<br>make<br>make install  </p>
</blockquote>
<p>Psmisc-22.5</p>
<blockquote>
<p>用于显示进程信息的程序</p>
<p>命令：pstree、killall<br>-—————–<br>./configure –prefix=/usr –exec-prefix=””<br>make<br>make install<br>mv -v /bin/pstree* /usr/bin<br>ln -sv killall /bin/pidof  </p>
</blockquote>
<p>Shadow-4.0.18.1</p>
<blockquote>
<p>用于在安全方式下处理密码的程序</p>
<p>配置文件/etc</p>
<p>库文件:/usr/lib、/lib</p>
<p>命令位置:/bin、/usr/bin</p>
<p>命令：su、passwd、login、useradd、userdel、chsh</p>
<p>-—————–<br>patch -Np1 -i ../shadow-4.0.18.1-useradd_fix-2.patch</p>
<p>./configure –libdir=/lib –sysconfdir=/etc –enable-shared \</p>
<p>    –without-selinux</p>
<p>sed -i ‘s/groups$(EXEEXT) //‘ src/Makefile</p>
<p>find man -name Makefile -exec sed -i ‘s/groups\.1 / /‘ {} \;</p>
<p>sed -i -e ‘s@#MD5_CRYPT_ENAB.no@MD5_CRYPT_ENAB yes@’ \</p>
<p>    -e ‘s@/var/spool/mail@/var/mail@’ etc/login.defs</p>
<p>make</p>
<p>make install</p>
<p>mv -v /usr/bin/passwd /bin</p>
<p>mv -v /lib/libshadow.*a /usr/lib</p>
<p>rm -v /lib/libshadow.so</p>
<p>ln -sfv ../../lib/libshadow.so.0 /usr/lib/libshadow.so</p>
<p>pwconv</p>
<p>grpconv</p>
<p>useradd -D -b /home</p>
<p>sed -i ‘s/yes/no/‘ /etc/default/useradd</p>
<p>passwd root   #一定要设置root密码  </p>
</blockquote>
<p>Sysklogd-1.4.1</p>
<blockquote>
<p>记录系统日志信息的程序</p>
<p>命令：klogd守护程序、syslogd<br>-—————-<br>patch -Np1 -i ../sysklogd-1.4.1-fixes-2.patch<br>patch -Np1 -i ../sysklogd-1.4.1-8bit-1.patch<br>make<br>make install  </p>
<blockquote>
<p>cat &gt; /etc/syslog.conf &lt;&lt; “EOF”<br># Begin /etc/syslog.conf  </p>
<p>auth,authpriv.* -/var/log/auth.log<br>*.*;auth,authpriv.none -/var/log/sys.log<br>daemon.* -/var/log/daemon.log<br>kern.* -/var/log/kern.log<br>mail.* -/var/log/mail.log<br>user.* -/var/log/user.log<br>*.emerg *  </p>
<p># End /etc/syslog.conf<br>EOF  </p>
</blockquote>
</blockquote>
<p>Sysvinit-2.86  </p>
<blockquote>
<p>一些控制系统启动、运行、关闭的程序</p>
<p>配置文件：/etc/inittab</p>
<p>命令：shutdown、init、reboot等<br>-——————<br>sed -i ‘s@Sending processes@&amp; configured via /etc/inittab@g’ \<br>    src/init.c<br>make -C src<br>make -C src install  </p>
<blockquote>
<p>cat &gt; /etc/inittab &lt;&lt; “EOF”<br># Begin /etc/inittab  </p>
<p>id:3:initdefault:  </p>
<p>si::sysinit:/etc/rc.d/init.d/rc sysinit  </p>
<p>l0:0:wait:/etc/rc.d/init.d/rc 0<br>l1:S1:wait:/etc/rc.d/init.d/rc 1<br>l2:2:wait:/etc/rc.d/init.d/rc 2<br>l3:3:wait:/etc/rc.d/init.d/rc 3<br>l4:4:wait:/etc/rc.d/init.d/rc 4<br>l5:5:wait:/etc/rc.d/init.d/rc 5<br>l6:6:wait:/etc/rc.d/init.d/rc 6  </p>
<p>ca:12345:ctrlaltdel:/sbin/shutdown -t1 -a -r now  </p>
<p>su:S016:once:/sbin/sulogin  </p>
<p>1:2345:respawn:/sbin/agetty tty1 9600<br>2:2345:respawn:/sbin/agetty tty2 9600<br>3:2345:respawn:/sbin/agetty tty3 9600<br>4:2345:respawn:/sbin/agetty tty4 9600<br>5:2345:respawn:/sbin/agetty tty5 9600<br>6:2345:respawn:/sbin/agetty tty6 9600  </p>
<p># End /etc/inittab  </p>
</blockquote>
<blockquote>
<p>EOF  </p>
</blockquote>
</blockquote>
<p>Tar-1.18</p>
<blockquote>
<p>一个归档程序<br>-————-<br>./configure –prefix=/usr –bindir=/bin –libexecdir=/usr/sbin<br>make<br>make install  </p>
</blockquote>
<p>Texinfo-4.9</p>
<blockquote>
<p>读取、写入、转换 Info 文档的程序</p>
<p>命令：info等<br>-—————<br>patch -Np1 -i ../texinfo-4.9-multibyte-1.patch<br>patch -Np1 -i ../texinfo-4.9-tempfile_fix-1.patch<br>./configure –prefix=/usr<br>make<br>make install<br>make TEXMF=/usr/share/texmf install-tex<br>cd /usr/share/info<br>rm dir<br>for f in *<br>do install-info $f dir 2&gt;/dev/null<br>done  </p>
</blockquote>
<p>Udev-113</p>
<blockquote>
<p>包含动态地创建设备节点的程序</p>
<p>命令：udevinfo等<br>-—————–<br>tar -xvf ../udev-config-6.3.tar.bz2<br>install -dv /lib/{firmware,udev/devices/{pts,shm}}<br>mknod -m0666 /lib/udev/devices/null c 1 3<br>ln -sv /proc/self/fd /lib/udev/devices/fd<br>ln -sv /proc/self/fd/0 /lib/udev/devices/stdin<br>ln -sv /proc/self/fd/1 /lib/udev/devices/stdout<br>ln -sv /proc/self/fd/2 /lib/udev/devices/stderr<br>ln -sv /proc/kcore /lib/udev/devices/core<br>make EXTRAS=”`echo extras/*/`“<br>make DESTDIR=/ EXTRAS=”`echo extras/*/`“ install<br>cp -v etc/udev/rules.d/[0-9]* /etc/udev/rules.d/<br>cd udev-config-6.3<br>make install<br>make install-doc<br>make install-extra-doc<br>cd ..<br>install -m644 -v docs/writing_udev_rules/index.html \<br>    /usr/share/doc/udev-113/index.html  </p>
</blockquote>
<p>Util-linux-2.12r</p>
<blockquote>
<p>包含许多工具。其中比较重要的是加载、卸载、格式化、分区和管理硬盘驱动器，打开 tty 端口和得到内核消息</p>
<p>命令位置：/usr/bin</p>
<p>命令：mount、whereis、cfdisk、<br>-—————<br>sed -e ‘s@etc/adjtime@var/lib/hwclock/adjtime@g’ \<br>    -i $(grep -rl ‘/etc/adjtime’ .)<br>mkdir -pv /var/lib/hwclock<br>patch -Np1 -i ../util-linux-2.12r-cramfs-1.patch<br>patch -Np1 -i ../util-linux-2.12r-lseek-1.patch<br>./configure<br>make HAVE_KILL=yes HAVE_SLN=yes<br>make HAVE_KILL=yes HAVE_SLN=yes install  </p>
</blockquote>
<p>Vim-7.1 </p>
<blockquote>
<p>强大的文本编辑器<br>-————-<br>patch -Np1 -i ../vim-7.1-fixes-1.patch<br>patch -Np1 -i ../vim-7.1-mandir-1.patch<br>echo ‘#define SYS_VIMRC_FILE “/etc/vimrc”‘ &gt;&gt; src/feature.h<br>./configure –prefix=/usr –enable-multibyte<br>make<br>make install<br>ln -sv vim /usr/bin/vi<br>for L in “” fr it pl ru; do<br>    ln -sv vim.1 /usr/share/man/$L/man1/vi.1<br>done<br>ln -sv ../vim/vim71/doc /usr/share/doc/vim-7.1  </p>
<blockquote>
<p>cat &gt; /etc/vimrc &lt;&lt; “EOF”<br>“ Begin /etc/vimrc  </p>
<p>set nocompatible<br>set backspace=2<br>syntax on<br>if (&amp;term == “iterm”) || (&amp;term == “putty”)<br>  set background=dark<br>endif  </p>
<p>“ End /etc/vimrc<br>EOF  </p>
</blockquote>
</blockquote>
<p>2、清理</p>
<p>logout</p>
<p>mv $LFS/tools $LFS/root</p>
<p>mv $LFS/sources $LFS/root</p>
<p>mv $LFS/build $LFS/root</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://zorroye.github.io/posts/991075949/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="ZorroYe">
      <meta itemprop="description" content="升级认知，看透本质">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Ye's Blog">
    </span>

    
    
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/posts/991075949/" class="post-title-link" itemprop="url">LFS制作-4、目标系统-2目标工具链</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2012-10-25 15:22:00" itemprop="dateCreated datePublished" datetime="2012-10-25T15:22:00+08:00">2012-10-25</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-08-18 10:28:04" itemprop="dateModified" datetime="2020-08-18T10:28:04+08:00">2020-08-18</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/lfs/" itemprop="url" rel="index"><span itemprop="name">lfs</span></a>
                </span>
            </span>

          
            <span id="/posts/991075949/" class="post-meta-item leancloud_visitors" data-flag-title="LFS制作-4、目标系统-2目标工具链" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="far fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/posts/991075949/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/posts/991075949/" itemprop="commentCount"></span>
    </a>
  </span>
  
  <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
              <span class="post-meta-item-text">本文字数：</span>
              <span>4k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
              <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>14 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>1、Linux-2.6.22.5 API Headers </p>
<p>#头文件，安装位置/usr/include，里面的*.h都是头文件</p>
<p>#内核就相当于CPU，而头文件就相当于CPU的针脚，对CPU的操作都是通过针脚传命令进去的。</p>
<p>sed -i ‘/scsi/d’ include/Kbuild</p>
<blockquote>
<p>#当前行的上一行插入/scsi/d</p>
</blockquote>
<p>make mrproper</p>
<p>make headers_check</p>
<p>make INSTALL_HDR_PATH=dest headers_install</p>
<p>cp -rv dest/include/* /usr/include</p>
<p>2、Man-pages-2.63 </p>
<p>make install</p>
<p>3、Glibc-2.5.1</p>
<p>#包含了主要的C库。这个库提供了基本例程，用于分配内存、搜索目录、打开关闭文件、读写文件、字串处理、模式匹配、数学计算等等。Glibc 的编译系统是高度自给自足的，即使当前编译器 specs 文件和连接器还指向 /tools 目录，也能正确安装</p>
<p>#安装位置:/usr/bin、/usr/lib</p>
<p>#包含的命令如：ldd、ldconfig</p>
<p>#包含的库文件：ld.so、libc</p>
<p>-—————————————————————–</p>
<p>tar -xvf ../glibc-libidn-2.5.1.tar.gz</p>
<p>mv glibc-libidn-2.5.1 libidn</p>
<p>sed -i ‘/vi_VN.TCVN/d’ localedata/SUPPORTED</p>
<blockquote>
<p>#当前行的上一行插入/vi_VN.TCVN/d</p>
</blockquote>
<p>sed -i \</p>
<p>‘s|libs -o|libs -L/usr/lib -Wl,-dynamic-linker=/lib/ld-linux.so.2 -o|’ \</p>
<p>        scripts/test-installation.pl</p>
<p>sed -i ‘s|@BASH@|/bin/bash|’ elf/ldd.bash.in</p>
<p>mkdir -v ../glibc-build</p>
<p>cd ../glibc-build</p>
<p>../glibc-2.5.1/configure –prefix=/usr \</p>
<p>    –disable-profile –enable-add-ons \</p>
<p>    –enable-kernel=2.6.0 –libexecdir=/usr/lib/glibc</p>
<p>make</p>
<p>touch /etc/ld.so.conf</p>
<p>make install</p>
<p>make localedata/install-locales</p>
<p>cat &gt; /etc/nsswitch.conf &lt;&lt; “EOF”</p>
<blockquote>
<p># Begin /etc/nsswitch.conf</p>
<p>passwd: files</p>
<p>group: files</p>
<p>shadow: files</p>
<p>hosts: files dns</p>
<p>networks: files</p>
<p>protocols: files</p>
<p>services: files</p>
<p>ethers: files</p>
<p>rpc: files</p>
<p># End /etc/nsswitch.conf</p>
</blockquote>
<p>EOF</p>
<p>#nsswitch.conf：系统数据库及名字服务开关配置文件</p>
<p>cp -v –remove-destination /usr/share/zoneinfo/Asia/Shanghai \</p>
<p>    /etc/localtime</p>
<p>cat &gt; /etc/ld.so.conf &lt;&lt; “EOF”</p>
<blockquote>
<p># Begin /etc/ld.so.conf</p>
<p>/usr/local/lib</p>
<p>/opt/lib</p>
<p># End /etc/ld.so.conf</p>
</blockquote>
<p>EOF</p>
<p>4、调整工具链</p>
<p>mv -v /tools/bin/{ld,ld-old}</p>
<p>mv -v /tools/$(gcc -dumpmachine)/bin/{ld,ld-old}</p>
<p>mv -v /tools/bin/{ld-new,ld}</p>
<p>ln -sv /tools/bin/ld /tools/$(gcc -dumpmachine)/bin/ld</p>
<p>gcc -dumpspecs | sed \     -e ‘s@/tools/lib/ld-linux.so.2@/lib/ld-linux.so.2@g’ \     -e ‘/\*startfile_prefix_spec:/{n;s@.*@/usr/lib/ @}’ \     -e ‘/\*cpp:/{n;s@$@ -isystem /usr/include@}’ &gt; \     `dirname $(gcc –print-libgcc-file-name)`/specs</p>
<p>测试：很重要</p>
<p>echo ‘main(){}’ &gt; dummy.c</p>
<p>cc dummy.c -v -Wl,–verbose &amp;&gt; dummy.log</p>
<p>readelf -l a.out | grep ‘: /lib’</p>
<blockquote>
<p>结果：[Requesting program interpreter: /lib/ld-linux.so.2]</p>
</blockquote>
<p>grep -o ‘/usr/lib.*/crt[1in].*succeeded’ dummy.log</p>
<blockquote>
<p>结果：</p>
<p>/usr/lib/crt1.o succeeded</p>
<p>/usr/lib/crti.o succeeded</p>
<p>/usr/lib/crtn.o succeeded</p>
</blockquote>
<p>grep -B1 ‘^ /usr/include’ dummy.log</p>
<blockquote>
<p>结果：</p>
<p>#include &lt;…&gt; search starts here:</p>
<p> /usr/include</p>
</blockquote>
<p>grep ‘SEARCH.*/usr/lib’ dummy.log |sed ‘s|; |\n|g’</p>
<blockquote>
<p>结果：</p>
<p>SEARCH_DIR(“/tools/i686-pc-linux-gnu/lib”)</p>
<p>SEARCH_DIR(“/usr/lib”)</p>
<p>SEARCH_DIR(“/lib”);</p>
</blockquote>
<p>grep “/lib/libc.so.6 “ dummy.log</p>
<blockquote>
<p>结果：attempt to open /lib/libc.so.6 succeeded</p>
</blockquote>
<p>grep found dummy.log</p>
<blockquote>
<p>结果：found ld-linux.so.2 at /lib/ld-linux.so.2</p>
</blockquote>
<p>5、 Binutils-2.17 </p>
<p>#Binutils 是一组开发工具，包括连接器、汇编器和其他用于目标文件和档案的工具。</p>
<p>#安装位置/usr/bin下</p>
<p>#包含的命令：as、ld</p>
<p>expect -c “spawn ls”</p>
<blockquote>
<p>结果：spawn ls</p>
</blockquote>
<p>mkdir -v ../binutils-build</p>
<p>cd ../binutils-build</p>
<p>../binutils-2.17/configure –prefix=/usr \</p>
<p>    –enable-shared</p>
<p>make tooldir=/usr</p>
<p>make tooldir=/usr install</p>
<p>cp -v ../binutils-2.17/include/libiberty.h /usr/include</p>
<p>6、GCC-4.1.2 </p>
<p>#GCC 软件包包含 GNU 编译器，其中有 C 和 C++ 编译器。</p>
<p>#安装位置/usr/bin</p>
<p>#包含的命令如gcc、c++、g++等</p>
<p>sed -i ‘s/install_to_$(INSTALL_DEST) //‘ libiberty/Makefile.in</p>
<p>sed -i ‘s/^XCFLAGS =$/&amp; -fomit-frame-pointer/‘ gcc/Makefile.in</p>
<p>sed -i ‘s@\./fixinc\.sh@-c true@’ gcc/Makefile.in</p>
<p>sed -i ‘s/@have_mktemp_command@/yes/‘ gcc/gccbug.in</p>
<p>mkdir -v ../gcc-build</p>
<p>cd ../gcc-build</p>
<p>../gcc-4.1.2/configure –prefix=/usr \</p>
<p>    –libexecdir=/usr/lib –enable-shared \</p>
<p>    –enable-threads=posix –enable-__cxa_atexit \</p>
<p>    –enable-clocale=gnu –enable-languages=c,c++</p>
<p>make</p>
<p>make install</p>
<p>ln -sv ../usr/bin/cpp /lib</p>
<p>ln -sv gcc /usr/bin/cc</p>
<p>测试</p>
<p>echo ‘main(){}’ &gt; dummy.c</p>
<p>cc dummy.c -v -Wl,–verbose &amp;&gt; dummy.log</p>
<p>readelf -l a.out | grep ‘: /lib’</p>
<blockquote>
<p>结果：</p>
<p>[Requesting program interpreter: /lib/ld-linux.so.2]</p>
</blockquote>
<p>grep -o ‘/usr/lib.*/crt[1in].*succeeded’ dummy.log</p>
<blockquote>
<p>结果：</p>
<p>/usr/lib/gcc/i686-pc-linux-gnu/4.1.2/../../../crt1.o succeeded</p>
<p>/usr/lib/gcc/i686-pc-linux-gnu/4.1.2/../../../crti.o succeeded</p>
<p>/usr/lib/gcc/i686-pc-linux-gnu/4.1.2/../../../crtn.o succeeded</p>
</blockquote>
<p>grep -B1 ‘^ /usr/include’ dummy.log</p>
<blockquote>
<p>结果：</p>
<p>#include &lt;…&gt; search starts here:</p>
<p> /usr/local/include</p>
<p> /usr/lib/gcc/i686-pc-linux-gnu/4.1.2/include</p>
<p> /usr/include</p>
</blockquote>
<p>grep ‘SEARCH.*/usr/lib’ dummy.log |sed ‘s|; |\n|g’</p>
<blockquote>
<p>结果：</p>
<p>SEARCH_DIR(“/usr/i686-pc-linux-gnu/lib”)</p>
<p>SEARCH_DIR(“/usr/local/lib”)</p>
<p>SEARCH_DIR(“/lib”)</p>
<p>SEARCH_DIR(“/usr/lib”);</p>
</blockquote>
<p>grep “/lib/libc.so.6 “ dummy.log</p>
<blockquote>
<p>结果：attempt to open /lib/libc.so.6 succeeded</p>
</blockquote>
<p>grep found dummy.log</p>
<blockquote>
<p>结果：found ld-linux.so.2 at /lib/ld-linux.so.2</p>
</blockquote>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://zorroye.github.io/posts/3518050721/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="ZorroYe">
      <meta itemprop="description" content="升级认知，看透本质">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Ye's Blog">
    </span>

    
    
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/posts/3518050721/" class="post-title-link" itemprop="url">LFS制作-4、目标系统-1chroot和建相关文件</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2012-10-25 13:30:00" itemprop="dateCreated datePublished" datetime="2012-10-25T13:30:00+08:00">2012-10-25</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-08-18 10:28:04" itemprop="dateModified" datetime="2020-08-18T10:28:04+08:00">2020-08-18</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/lfs/" itemprop="url" rel="index"><span itemprop="name">lfs</span></a>
                </span>
            </span>

          
            <span id="/posts/3518050721/" class="post-meta-item leancloud_visitors" data-flag-title="LFS制作-4、目标系统-1chroot和建相关文件" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="far fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/posts/3518050721/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/posts/3518050721/" itemprop="commentCount"></span>
    </a>
  </span>
  
  <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
              <span class="post-meta-item-text">本文字数：</span>
              <span>1.7k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
              <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>6 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>挂载相关系统</p>
<p>#export LFS=/mnt/lfs</p>
<p>#mkdir -pv $LFS</p>
<p>#mount -v -t ext3 /dev/hda1 $LFS<br>#ln -sv $LFS/tools /  </p>
<p>mkdir -pv $LFS/{dev,proc,sys}</p>
<p>mknod -m 600 $LFS/dev/console c 5 1</p>
<p>mknod -m 666 $LFS/dev/null c 1 3</p>
<p>mount -v –bind /dev $LFS/dev</p>
<p>mount -vt devpts devpts $LFS/dev/pts</p>
<p>mount -vt tmpfs shm $LFS/dev/shm</p>
<p>mount -vt proc proc $LFS/proc</p>
<p>mount -vt sysfs sysfs $LFS/sys</p>
<p>chroot “$LFS” /tools/bin/env -i \</p>
<p>    HOME=/root TERM=”$TERM” PS1=’\u:\w\$ ‘ \</p>
<p>    PATH=/bin:/usr/bin:/sbin:/usr/sbin:/tools/bin \</p>
<p>    /tools/bin/bash –login +h</p>
<p>-————————————————————————————</p>
<p>1、建标准的目录树</p>
<p>mkdir -pv /{bin,boot,etc/opt,home,lib,mnt,opt}</p>
<p>mkdir -pv /{media/{floppy,cdrom},sbin,srv,var}</p>
<p>install -dv -m 0750 /root</p>
<p>install -dv -m 1777 /tmp /var/tmp</p>
<p>mkdir -pv /usr/{,local/}{bin,include,lib,sbin,src}</p>
<p>mkdir -pv /usr/{,local/}share/{doc,info,locale,man}</p>
<p>mkdir -v  /usr/{,local/}share/{misc,terminfo,zoneinfo}</p>
<p>mkdir -pv /usr/{,local/}share/man/man{1..8}</p>
<p>for dir in /usr /usr/local; do</p>
<p>  ln -sv share/{man,doc,info} $dir</p>
<p>done</p>
<p>mkdir -v /var/{lock,log,mail,run,spool}</p>
<p>mkdir -pv /var/{opt,cache,lib/{misc,locate},local}</p>
<p>2、建必要的符号连接</p>
<p>ln -sv /tools/bin/{bash,cat,echo,grep,pwd,stty} /bin</p>
<p>ln -sv /tools/bin/perl /usr/bin</p>
<p>ln -sv /tools/lib/libgcc_s.so{,.1} /usr/lib</p>
<p>ln -sv /tools/lib/libstdc++.so{,.6} /usr/lib</p>
<p>ln -sv bash /bin/sh</p>
<blockquote>
<p>#安装软件包的时候相应的连接会被替代掉</p>
</blockquote>
<p>3、建/etc/mtab  </p>
<p>touch /etc/mtab</p>
<p>4、建/etc/passwd</p>
<p>cat &gt; /etc/passwd &lt;&lt; “EOF”</p>
<p>root:x:0:0:root:/root:/bin/bash</p>
<p>nobody:x:99:99:Unprivileged User:/dev/null:/bin/false</p>
<p>EOF</p>
<p>5、建/etc/group</p>
<p>cat &gt; /etc/group &lt;&lt; “EOF”</p>
<p>root:x:0:</p>
<p>bin:x:1:</p>
<p>sys:x:2:</p>
<p>kmem:x:3:</p>
<p>tty:x:4:</p>
<p>tape:x:5:</p>
<p>daemon:x:6:</p>
<p>floppy:x:7:</p>
<p>disk:x:8:</p>
<p>lp:x:9:</p>
<p>dialout:x:10:</p>
<p>audio:x:11:</p>
<p>video:x:12:</p>
<p>utmp:x:13:</p>
<p>usb:x:14:</p>
<p>cdrom:x:15:</p>
<p>mail:x:34:</p>
<p>nogroup:x:99:</p>
<p>EOF</p>
<p>6、从新用bash登录，这样就有名字了</p>
<p>exec /tools/bin/bash –login +h</p>
<p>7、建日志文件</p>
<p>touch /var/run/utmp /var/log/{btmp,lastlog,wtmp}</p>
<p>chgrp -v utmp /var/run/utmp /var/log/lastlog</p>
<p>chmod -v 664 /var/run/utmp /var/log/lastlog</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://zorroye.github.io/posts/1902492967/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="ZorroYe">
      <meta itemprop="description" content="升级认知，看透本质">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Ye's Blog">
    </span>

    
    
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/posts/1902492967/" class="post-title-link" itemprop="url">LFS制作-3、临时系统-2必需软件</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2012-10-25 12:35:00" itemprop="dateCreated datePublished" datetime="2012-10-25T12:35:00+08:00">2012-10-25</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-08-18 10:28:04" itemprop="dateModified" datetime="2020-08-18T10:28:04+08:00">2020-08-18</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/lfs/" itemprop="url" rel="index"><span itemprop="name">lfs</span></a>
                </span>
            </span>

          
            <span id="/posts/1902492967/" class="post-meta-item leancloud_visitors" data-flag-title="LFS制作-3、临时系统-2必需软件" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="far fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/posts/1902492967/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/posts/1902492967/" itemprop="commentCount"></span>
    </a>
  </span>
  
  <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
              <span class="post-meta-item-text">本文字数：</span>
              <span>1.8k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
              <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>7 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>Ncurses-5.6 </p>
<p>./configure –prefix=/tools –with-shared \</p>
<p>    –without-debug –without-ada –enable-overwrite</p>
<p>make &amp;&amp; make install </p>
<p>Bash-3.2 </p>
<p>patch -Np1 -i ../bash-3.2-fixes-5.patch</p>
<p>./configure –prefix=/tools –without-bash-malloc</p>
<p>ln -vs bash /tools/bin/sh</p>
<p>Bzip2-1.0.4 </p>
<p>make &amp;&amp; make PREFIX=/tools install</p>
<p>Coreutils-6.9</p>
<p>./configure –prefix=/tools &amp;&amp; make &amp;&amp; make install</p>
<p>cp -v src/su /tools/bin/su-tools</p>
<p>Diffutils-2.8.1 </p>
<p>./configure –prefix=/tools &amp;&amp; make &amp;&amp; make install</p>
<p>Findutils-4.2.31 </p>
<p>./configure –prefix=/tools &amp;&amp; make &amp;&amp; make install</p>
<p>Gawk-3.1.5</p>
<p>./configure –prefix=/tools</p>
<p>cat &gt;&gt; config.h &lt;&lt; “EOF”</p>
<blockquote>
<p>#define HAVE_LANGINFO_CODESET 1</p>
<p>#define HAVE_LC_MESSAGES 1</p>
</blockquote>
<p>EOF</p>
<p>make &amp;&amp; make install</p>
<p>Gettext-0.16.1</p>
<p>cd gettext-tools</p>
<p>./configure –prefix=/tools –disable-shared</p>
<p>make -C gnulib-lib</p>
<p>make -C src msgfmt</p>
<p>cp -v src/msgfmt /tools/bin</p>
<p>Grep-2.5.1a</p>
<p>./configure –prefix=/tools \</p>
<p>    –disable-perl-regexp</p>
<p>make &amp;&amp; make install</p>
<p>Gzip-1.3.12</p>
<p>./configure –prefix=/tools &amp;&amp; make &amp;&amp; make install</p>
<p>Make-3.81</p>
<p>./configure –prefix=/tools &amp;&amp; make &amp;&amp; make install</p>
<p>Patch-2.5.4 </p>
<p>./configure –prefix=/tools &amp;&amp; make &amp;&amp; make install</p>
<p>Perl-5.8.8 </p>
<p>patch -Np1 -i ../perl-5.8.8-libc-2.patch</p>
<p>./configure.gnu –prefix=/tools -Dstatic_ext=’Data/Dumper Fcntl IO POSIX’</p>
<p>make perl utilities</p>
<p>cp -v perl pod/pod2man /tools/bin</p>
<p>mkdir -pv /tools/lib/perl5/5.8.8</p>
<p>cp -Rv lib/* /tools/lib/perl5/5.8.8</p>
<p>Sed-4.1.5 </p>
<p>./configure –prefix=/tools &amp;&amp; make &amp;&amp; make install</p>
<p>Tar-1.18 </p>
<p>./configure –prefix=/tools &amp;&amp; make &amp;&amp; make install</p>
<p>Texinfo-4.9 </p>
<p>./configure –prefix=/tools &amp;&amp; make &amp;&amp; make install</p>
<p>Util-linux-2.12r </p>
<p>sed -i ‘s@/usr/include@/tools/include@g’ configure</p>
<blockquote>
<p>#把/usr/include替换为/tools/include</p>
</blockquote>
<p>./configure</p>
<p>make -C lib</p>
<p>make -C mount mount umount</p>
<p>make -C text-utils more</p>
<p>cp -v mount/{,u}mount text-utils/more /tools/bin</p>
<blockquote>
<p>#把mount/mount mount/umount text-utils/more 复制到/tools/bin下</p>
</blockquote>
<p>清理和改权限</p>
<p>不做也没关系</p>
<p>logout</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/17/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/17/">17</a><span class="page-number current">18</span><a class="page-number" href="/page/19/">19</a><span class="space">&hellip;</span><a class="page-number" href="/page/37/">37</a><a class="extend next" rel="next" href="/page/19/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



      

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      const activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      const commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

    </div>
  </main>

  <footer class="footer">
    <div class="footer-inner">
      

      

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">ZorroYe</span>
</div>
<div class="wordcount">
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-line"></i>
    </span>
    <span title="站点总字数">448k</span>
  </span>
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="站点阅读时长">27:10</span>
  </span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <script src="//cdn.jsdelivr.net/npm/animejs@3.2.0/lib/anime.min.js"></script>
<script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script><script src="/js/bookmark.js"></script>

  
  <script>
    (function(){
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      bp.src = (curProtocol === 'https') ? 'https://zz.bdstatic.com/linksubmit/push.js' : 'http://push.zhanzhang.baidu.com/push.js';
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
    })();
  </script>




  <script src="/js/local-search.js"></script>












  






<script>
  (function() {
    function leancloudSelector(url) {
      url = encodeURI(url);
      return document.getElementById(url).querySelector('.leancloud-visitors-count');
    }

    function addCount(Counter) {
      const visitors = document.querySelector('.leancloud_visitors');
      const url = decodeURI(visitors.id);
      const title = visitors.dataset.flagTitle;

      Counter('get', '/classes/Counter?where=' + encodeURIComponent(JSON.stringify({ url })))
        .then(response => response.json())
        .then(({ results }) => {
          if (results.length > 0) {
            const counter = results[0];
            leancloudSelector(url).innerText = counter.time + 1;
            Counter('put', '/classes/Counter/' + counter.objectId, { time: { '__op': 'Increment', 'amount': 1 } })
              .catch(error => {
                console.error('Failed to save visitor count', error);
              });
          } else {
              leancloudSelector(url).innerText = 'Counter not initialized! More info at console err msg.';
              console.error('ATTENTION! LeanCloud counter has security bug, see how to solve it here: https://github.com/theme-next/hexo-leancloud-counter-security. \n However, you can still use LeanCloud without security, by setting `security` option to `false`.');
            
          }
        })
        .catch(error => {
          console.error('LeanCloud Counter Error', error);
        });
    }

    function showTime(Counter) {
      const visitors = document.querySelectorAll('.leancloud_visitors');
      const entries = [...visitors].map(element => {
        return decodeURI(element.id);
      });

      Counter('get', '/classes/Counter?where=' + encodeURIComponent(JSON.stringify({ url: { '$in': entries } })))
        .then(response => response.json())
        .then(({ results }) => {
          for (let url of entries) {
            const target = results.find(item => item.url === url);
            leancloudSelector(url).innerText = target ? target.time : 0;
          }
        })
        .catch(error => {
          console.error('LeanCloud Counter Error', error);
        });
    }

    const { app_id, app_key, server_url } = {"enable":true,"app_id":"hDUtOYptQ2tkDzGUszvs3g4N-gzGzoHsz","app_key":"6bM5r8tXF8x5HTop81N5Iz5z","server_url":"https://hdutoypt.lc-cn-n1-shared.com","security":true};
    function fetchData(api_server) {
      const Counter = (method, url, data) => {
        return fetch(`${api_server}/1.1${url}`, {
          method,
          headers: {
            'X-LC-Id'     : app_id,
            'X-LC-Key'    : app_key,
            'Content-Type': 'application/json',
          },
          body: JSON.stringify(data)
        });
      };
      if (CONFIG.page.isPost) {
        if (CONFIG.hostname !== location.hostname) return;
        addCount(Counter);
      } else if (document.querySelectorAll('.post-title-link').length >= 1) {
        showTime(Counter);
      }
    }

    const api_server = app_id.slice(-9) !== '-MdYXbMMI' ? server_url : `https://${app_id.slice(0, 8).toLowerCase()}.api.lncldglobal.com`;

    if (api_server) {
      fetchData(api_server);
    } else {
      fetch('https://app-router.leancloud.cn/2/route?appId=' + app_id)
        .then(response => response.json())
        .then(({ api_server }) => {
          fetchData('https://' + api_server);
        });
    }
  })();
</script>


  

  
<script>
NexT.utils.loadComments('#valine-comments', () => {
  NexT.utils.getScript('//cdn.jsdelivr.net/npm/valine@1.4.14/dist/Valine.min.js', () => {
    new Valine(Object.assign({
      el  : '#valine-comments',
      path: location.pathname,
    }, {"enable":true,"appId":"hDUtOYptQ2tkDzGUszvs3g4N-gzGzoHsz","appKey":"6bM5r8tXF8x5HTop81N5Iz5z","placeholder":"Just go go","avatar":"mm","meta":["nick","mail","link"],"pageSize":10,"language":"zh-cn","visitor":false,"comment_count":true,"recordIP":true,"serverURLs":null,"enableQQ":false,"requiredFields":[]}
    ));
  }, window.Valine);
});
</script>

<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"log":false,"model":{"jsonPath":"/live2dw/assets/miku.model.json"},"display":{"position":"right","width":260,"height":400},"mobile":{"show":true},"react":{"opacity":0.8}});</script></body>
</html>
